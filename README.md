# ì–‘ì²­ í™ˆíŽ˜ì´ì§€

- [ì–‘ì²­ í™ˆíŽ˜ì´ì§€](#ì–‘ì²­-í™ˆíŽ˜ì´ì§€)
  - [ì—…ë°ì´íŠ¸ 2022. 01. 09](#ì—…ë°ì´íŠ¸-2022-01-09)
    - [ê¸°ë³¸ í°íŠ¸ ìŠ¤íƒ€ì¼ ë³€ê²½](#ê¸°ë³¸-í°íŠ¸-ìŠ¤íƒ€ì¼-ë³€ê²½)
    - [ê¸°íƒ€ ê¸°ëŠ¥ ë³€ê²½](#ê¸°íƒ€-ê¸°ëŠ¥-ë³€ê²½)
  - [ì—…ë°ì´íŠ¸ 2022. 01. 03](#ì—…ë°ì´íŠ¸-2022-01-03)
  - [ì—…ë°ì´íŠ¸ 2022. 01. 01](#ì—…ë°ì´íŠ¸-2022-01-01)
  - [ì—…ë°ì´íŠ¸ 2021. 12. 29](#ì—…ë°ì´íŠ¸-2021-12-29)
  - [ì—…ë°ì´íŠ¸ 2021. 12. 18](#ì—…ë°ì´íŠ¸-2021-12-18)
  - [ì—…ë°ì´íŠ¸ 2021. 12. 17](#ì—…ë°ì´íŠ¸-2021-12-17)
  - [ì—…ë°ì´íŠ¸ 2021. 12. 15](#ì—…ë°ì´íŠ¸-2021-12-15)
  - [ì—…ë°ì´íŠ¸ 2021. 12.13](#ì—…ë°ì´íŠ¸-2021-1213)
  - [ì—…ë°ì´íŠ¸ 2021. 12. 9](#ì—…ë°ì´íŠ¸-2021-12-9)
  - [ì—…ë°ì´íŠ¸ 2021. 12. 4](#ì—…ë°ì´íŠ¸-2021-12-4)
  - [ì—…ë°ì´íŠ¸ 2021.11.20](#ì—…ë°ì´íŠ¸-20211120)
  - [ì—…ë°ì´íŠ¸ 2021.11.13](#ì—…ë°ì´íŠ¸-20211113)
  - [ì—…ë°ì´íŠ¸ 2021. 11. 8](#ì—…ë°ì´íŠ¸-2021-11-8)
  - [1.2. ê°œë°œ ì¼ê¸°](#12-ê°œë°œ-ì¼ê¸°)
    - [2021ë…„ 7ì›” 17ì¼](#2021ë…„-7ì›”-17ì¼)
    - [2021ë…„ 7ì›” 27ì¼](#2021ë…„-7ì›”-27ì¼)
    - [2021ë…„ 7ì›” 29ì¼](#2021ë…„-7ì›”-29ì¼)
    - [2021ë…„ 8ì›” 7ì¼](#2021ë…„-8ì›”-7ì¼)
    - [2021ë…„ 9ì›” 1ì¼](#2021ë…„-9ì›”-1ì¼)
      - [serverì™€ clientëŠ” ì–´ë–»ê²Œ ì†Œí†µí• ê¹Œ?](#serverì™€-clientëŠ”-ì–´ë–»ê²Œ-ì†Œí†µí• ê¹Œ)
    - [2021ë…„ 9ì›” 2ì¼](#2021ë…„-9ì›”-2ì¼)
      - [frontì—ì„œ ì–‘ì‹ ê²€ì¦í•˜ê¸°](#frontì—ì„œ-ì–‘ì‹-ê²€ì¦í•˜ê¸°)
      - [ì™œ req.fileì´ undefinedì¼ê¹Œ?](#ì™œ-reqfileì´-undefinedì¼ê¹Œ)
      - [í•´ê²°](#í•´ê²°)
      - [AWS S3ì—ì„œ ìž‘ë™ì„ ì•ˆí•˜ëŠ” ê±¸ê¹Œ??](#aws-s3ì—ì„œ-ìž‘ë™ì„-ì•ˆí•˜ëŠ”-ê±¸ê¹Œ)
    - [2021ë…„ 9ì›” 7ì¼](#2021ë…„-9ì›”-7ì¼)
      - [image resize](#image-resize)
    - [2021ë…„ 10ì›” 9ì¼](#2021ë…„-10ì›”-9ì¼)
        - [ì›¹ ì»´í¬ë„ŒíŠ¸](#ì›¹-ì»´í¬ë„ŒíŠ¸)
  - [1.3. ì°¸ì¡°](#13-ì°¸ì¡°)

## ì—…ë°ì´íŠ¸ 2022. 01. 09

### ê¸°ë³¸ í°íŠ¸ ìŠ¤íƒ€ì¼ ë³€ê²½

- root í°íŠ¸ ì‚¬ì´ì¦ˆ 10pxë¡œ ì¡°ì •
- í°íŠ¸ rem ì‚¬ì´ì¦ˆ ë³€ê²½
- í°íŠ¸ ìŠ¤íƒ€ì¼ word-break : keep-allë¡œ ë³€ê²½í•˜ì—¬ ê¸€ìž ìŠ¤íƒ€ì¼ ìœ ì§€í•˜ê³ ë¡ ë³€ê²½
- ê¸°ë³¸ font-weight :400ìœ¼ë¡œ ë³€ê²½(normal)
- letter-spacing:-.05remìœ¼ë¡œ ë³€ê²½

### ê¸°íƒ€ ê¸°ëŠ¥ ë³€ê²½

- api router isWeekly ê¶Œí•œ ë³€ê²½ (ê¸°ì¡´ ê¶Œí•œì´ ìž˜ëª» ì„¤ì •ë˜ì–´ leaderì™€ blogger ì‚­ì œí›„ administrator ì¶”ê°€
- ì£¼ë³´ ë””í…Œì¼ì— ë¸”ë¡œê·¸ ìµœì‹  ê¸€ 4ê°œ í¬í•¨í•˜ë„ë¡ ë³€ê²½

## ì—…ë°ì´íŠ¸ 2022. 01. 03

ê³µì§€ì‚¬í•­ isWeekly checkboxë¥¼ authorityê°€ masterë‚˜ administratorì¼ ë•Œ ë³´ì´ë„ë¡
[Light/Dark Mode Toggle Button Using 1 variable 2021 || CSS JS](https://dev.to/joyshaheb/light-dark-mode-toggle-button-using-1-variable-2021-css-js-13l)

## ì—…ë°ì´íŠ¸ 2022. 01. 01

í† ìŠ¤íŠ¸ ì—ë””í„° color-syntax ì¶”ê°€

## ì—…ë°ì´íŠ¸ 2021. 12. 29

ìƒë‹¨ ë©”ë‰´ ì• ë‹ˆë©”ì´ì…˜ ì¶”ê°€

- ì»¨í…íŠ¸ ë†’ì´ê°€ ë†’ì•„ì¡Œì„ ë•Œ, ìŠ¤í¬ë¡¤ì„ ìœ„ë¡œ ì˜¬ë¦¬ë©´ ìƒë‹¨ì— ìˆ¨ê²¨ì ¸ìžˆë˜ í—¤ë”ê°€ ë‚˜íƒ€ë‚˜ë„ë¡ ì• ë‹ˆë©”ì´ì…˜ ì¶”ê°€

ê²Œì‹œê¸€ì„ ì½ì„ ë•Œ, ì‚¬ì´ë“œ ë©”ë‰´ ì¶”ê°€

- ê²Œì‹œê¸€ì—ì„œ h1, h2, h3, h4,h5 íƒœê·¸ë¥¼ íŒŒì‹±í•´ì„œ ì‚¬ì´ë“œì— ê·¸ë ¤ì£¼ë„ë¡ ìžë°”ìŠ¤í¬ë¦½íŠ¸ í•¨ìˆ˜ ì¶”ê°€

## ì—…ë°ì´íŠ¸ 2021. 12. 18

í¬ë¦¬ìŠ¤ë§ˆìŠ¤ ì´ë²¤íŠ¸ (snow)

- ìº”ë²„ìŠ¤ ì´ë²¤íŠ¸ ì¶”ê°€

## ì—…ë°ì´íŠ¸ 2021. 12. 17

ë„íë©˜íŠ¸ ê²Œì‹œíŒì„ ì¶”ê°€í•˜ë©´ì„œ ìƒê¸´ ë¬¸ì œ ìˆ˜ì •

- documents model, view, controller ì¶”ê°€
- getUrl() ì—ëŸ¬ (pathë¥¼ ì œëŒ€ë¡œ ê°€ì ¸ì˜¤ì§€ ëª»í•¨) ìˆ˜ì •

## ì—…ë°ì´íŠ¸ 2021. 12. 15

- es6 moduleì„ í™œìš©í•˜ì—¬ ë³€ìˆ˜, í•¨ìˆ˜ ë“± ì¤‘ë³µ ì œê±°
  1. HTTP request GET, POSTë¥¼ í•  ë•Œ, ë°ì´í„°ë¥¼ ì£¼ëŠ” ê²ƒê³¼ ë°›ëŠ” í†µë¡œë¥¼ í•˜ë‚˜ë¡œ í†µí•©í•˜ê³  ë°ì´í„°ëŠ” FormData()ì™€ Toast UI Editorì˜ getMarkdown()í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ë­‰ì¹˜ë¡œ ë°›ê³  ë˜ì§€ë„ë¡ ì„¤ê³„í•˜ì˜€ë‹¤.
  2. ë°ì´í„°ë¥¼ ê°€ê³µí•˜ëŠ” í•¨ìˆ˜ë¥¼ ë¶™ì´ê¸°ë§Œ í•˜ë©´ ë˜ê¸° ë•Œë¬¸ì— ìƒˆë¡œìš´ MVCë¥¼ ì¶”ê°€í•œë‹¤ê³  í•˜ì—¬ë„ í•¨ìˆ˜ë¥¼ ìƒˆë¡œ ë§Œë“¤ í•„ìš”ê°€ ì—†ë‹¤.

## ì—…ë°ì´íŠ¸ 2021. 12.13

- server ê²½ê³ ì°½ì— deprecation ì˜µì…˜ì— ëŒ€í•œ ê²½ê³  ë©”ì‹œì§€ê°€ ì§€ì†ì ìœ¼ë¡œ í‘œì‹œë˜ëŠ” ë¬¸ì œ í•´ê²°
  mongoose ver. 6.1.1 ([no more deprecation warning options](https://mongoosejs.com/docs/migrating_to_6.html#no-more-deprecation-warning-options))

## ì—…ë°ì´íŠ¸ 2021. 12. 9

- ë³´ì•ˆ ì—…ë°ì´íŠ¸
  - hsts
  - https redirection ì—…ë°ì´íŠ¸
  - csrf token
  - csp
  - cors

## ì—…ë°ì´íŠ¸ 2021. 12. 4

- ë””ìžì¸ ë³€ê²½
- ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ì»¨íŠ¸ë¡¤ëŸ¬ ì‚­ì œ
- ë©”ë‰´ ë³€ê²½
  - ë„íë©˜íŠ¸, ì˜ˆë°°, ê³µì§€ì‚¬í•­, ë¸”ë¡œê·¸ ì¶”ê°€
  - ê´‘ê³ , ì£¼ë³´, ë¬µìƒì—ì„¸ì´ ì‚­ì œ

## ì—…ë°ì´íŠ¸ 2021.11.20

- ê²Œì‹œíŒ iframe ì¶”ê°€ ê°€ëŠ¥

## ì—…ë°ì´íŠ¸ 2021.11.13

- íšŒì›ê°€ìž… validation ìµœì í™” ìž‘ì—…
- ê´‘ê³  ì“°ê¸° ì—…ë°ì´íŠ¸ (ì£¼ë³´ì—ì„œ ë³´ì´ê²Œ í•˜ê¸° ë“±)
- ì‚¬ì†Œí•œ ë²„ê·¸ ìˆ˜ì •
- ê²Œì‹œíŒ ì‚¬ì§„ ë„£ê¸° êµ¬í˜„

## ì—…ë°ì´íŠ¸ 2021. 11. 8

ì—…ë°ì´íŠ¸ Toast UI Editor ver 3.1.1

## 1.2. ê°œë°œ ì¼ê¸°

### 2021ë…„ 7ì›” 17ì¼

í™ˆíŽ˜ì´ì§€ë¥¼ ë””í´ë¡œìž‰í•œì§€ ì¼ì£¼ì¼ì´ ë˜ì—ˆë‹¤. í˜„ìž¬ëŠ” ê°„ë‹¨í•œ ê¸€ì„ ì“°ê³  ë³¼ ìˆ˜ ìžˆëŠ” ì •ë„ì˜ ì›¹ íŽ˜ì´ì§€ ìˆ˜ì¤€ì´ë‹¤. ì•„ì§ ì›¹ ì–´í”Œë¦¬ì¼€ì´ì…˜ì´ë¼ê³  ë¶€ë¥´ê¸°ëŠ” ì–´ë µë‹¤. ë””í´ë¡œìž‰ì„ í•˜ê¸° ìœ„í•´ ìˆ˜ë§Žì€ í…ŒìŠ¤íŠ¸ë¥¼ í•´ì•¼í•˜ëŠ”ë° í”„ë¡ íŠ¸ë¶€í„° ë°±ì•¤ë“œê¹Œì§€ í•´ì•¼í• ê²ƒì´ ê½¤ ë§Žë‹¤. í•œë²ˆ ë¶™ìž¡ê³  í•˜ë‹¤ë³´ë©´ ì–´ëŠë§ ë°–ì€ ì–´ë‘¡ë‹¤.

1. session  
   ìƒê°ë³´ë‹¤ sessionì€ ìœ ìš©í•˜ë‹¤. req.pathë¥¼ sessionê°’ì— ì €ìž¥í•´ì„œ loginì´ í•„ìš”í•œ ì„œë¹„ìŠ¤ì—ì„œ ë¡œê·¸ì¸ì„ ìš”êµ¬í•˜ë©´ ë¡œê·¸ì¸ í•œ í›„ì— ë°”ë¡œ ê·¸ ì„œë¹„ìŠ¤ë¡œ ì´ë™ì„ í•  ìˆ˜ ìžˆë‹¤. ë˜í•œ userì •ë³´ë¥¼ ì €ìž¥í•˜ê±°ë‚˜ loginì¸ì´ ë˜ì–´ìžˆëŠ”ì§€ ê·¸ë ‡ì§€ ì•Šì€ì§€ ì•Œ ìˆ˜ ìžˆë‹¤.
   ë§Œì•½ sessionì€ logoutì„ í•˜ë©´ session.destroyê°€ ë˜ì–´ì„œ sessionì— ì €ìž¥ëœ ì •ë³´ëŠ” ëª¨ì¡°ë¦¬ ì‚­ì œëœë‹¤. ê¶ê¸ˆí•œê±´ sessionì´ destroyëì„ ë•Œ, dbì—ì„œë„ ì‚­ì œê°€ ë˜ëŠ”ì§€ ìž˜ ëª¨ë¥´ê² ë‹¤. ì´ê±´ í…ŒìŠ¤íŠ¸ë¥¼ í•´ë´ì•¼í•  ê²ƒ ê°™ë‹¤.

2. scss  
   cssë¥¼ ì‚¬ìš©í•´ì„œ ìŠ¤íƒ€ì¼ë§ì„ ê´€ë¦¬í•˜ëŠ”ê±´ ìƒê°ë³´ë‹¤ ì–´ë ¤ìš´ì¼ì´ë‹¤. ì»´í¬ë„ŒíŠ¸ì˜ ìˆ˜ê°€ ëŠ˜ì–´ë‚  ìˆ˜ë¡ ì •ë§ ë§Žì€ classì™€ idë“¤ì„ ê´€ë¦¬í•´ì•¼í•˜ê¸° ë•Œë¬¸ì´ë©° buttonì´ë‚˜ link, font-size, color style ë“± ìŠ¤íƒ€ì¼ì„ í†µì¼í•´ì•¼í•˜ëŠ” ê²½ìš° cssë¡œ ê´€ë¦¬í•˜ê¸° ë§¤ìš° ì–´ë µë‹¤. í•˜ì§€ë§Œ scssë¥¼ í†µí•´ì„œ \_variable, \_mixinì„ ë¯¸ë¦¬ ì„¤ì •í•´ì„œ ëŒ€ëŸ‰ìœ¼ë¡œ ì ìš©í•´ì•¼í•˜ëŠ” buttonì´ë‚˜ font-sizeë“±ì„ ê¸°ì–µí•˜ê¸° ì‰¬ìš´ ì´ë¦„ìœ¼ë¡œ ì €ìž¥ë©´ í•´ë‹¹ ìŠ¤íƒ€ì¼ì„ ë³€ìˆ˜ë‚˜ í•¨ìˆ˜ì²˜ëŸ¼ ëŒì–´ì™€ ì‚¬ìš©ì´ ê°€ëŠ¥í•˜ê¸° ë•Œë¬¸ì— ë§¤ìš° ìœ ìš©í•˜ë‹¤.

### 2021ë…„ 7ì›” 27ì¼

ê°œë°œ ì¼ê¸°ëŠ” 10ì¼ë§Œì— ìž‘ì„±í•œë‹¤. ë§¤ì¼ ìž‘ì„±í•˜ê¸°ë¡œ í•´ë†“ê³¤... ê·¸ëž˜ë„ ê³„ì† ê¾¸ì¤€ížˆ ì—…ë°ì´íŠ¸ë¥¼ í•˜ê³  ìžˆì–´ì„œ ì¢‹ë‹¤. í˜„ìž¬ ëŒ“ê¸€ ì½”ë“œë¥¼ ë§Œë“¤ë©´ì„œ ë§žë”±ë“œë¦¬ê²Œ ëœ ë¬¸ì œê°€ ìžˆë‹¤.

- ê²Œì‹œë¬¼ ì‚­ì œì‹œ ì°¸ì¡°í•˜ê³  ìžˆëŠ” ëŒ“ê¸€ì´ í•¨ê»˜ ì‚­ì œë˜ì§€ ì•ŠëŠ”ë‹¤. (ì›ëž˜ ì´ë ‡ê²Œ í•˜ëŠ”ê²Œ ë§žë‚˜?)
- ëŒ“ê¸€ ì‚­ì œì‹œ ê·¸ ëŒ“ê¸€ì„ ì°¸ì¡°í•˜ê³  ìžˆëŠ” ê²Œì‹œë¬¼ì—ì„œ ëŒ“ê¸€ ì•„ì´ë””ê°€ ì‚­ì œë˜ì§€ ì•ŠëŠ”ë‹¤.

ì›ëž˜ DBì—ëŠ” ë°ì´í„°ê°€ ë‚¨ê²¨ì ¸ ìžˆì–´ì•¼ í•˜ëŠ”ê±´ê°€? ìƒê°í•´ë³´ë©´ ì‹¸ì´ì›”ë“œì—ì„œ ë‚´ê°€ íƒˆí‡´ë¥¼ í–ˆë‹¤ê³  í•´ì„œ ë‚´ê°€ ì“´ ê²Œì‹œë¬¼ì´ ì‚­ì œë˜ì§€ëŠ” ì•Šìœ¼ë‹ˆê¹Œ... ê·¸ëž˜ë„ ì˜¤ë¥˜ê°€ ìƒê¸¸ ê²ƒ ê°™ì€ë°, ìž˜ ëª¨ë¥´ê² ì§€ë§Œ ì¼ë‹¨ dbì—ì„œ ì‚­ì œê°€ ë˜ì§€ ì•ŠëŠ” ê²ƒìœ¼ë¡œ ì•Œê³  ìžˆì–´ë³´ìž.

í™ˆíŽ˜ì´ì§€ë¥¼ ë§Œë“¤ë©´ì„œ ê³µë¶€í•´ì•¼í• ê²ƒë“¤

- [ ] ì• ë‹ˆë©”ì´ì…˜
- [ ] ê²€ìƒ‰ ìžë™ ì™„ì„±
- [ ] ë¬´í•œ ìŠ¤í¬ë¡¤
- [x] ë…ë¦½ ìŠ¤í¬ë¡¤ : ê°ì‹¸ ì•Šì€ divë¥¼ í¬ê¸°ë¥¼ ì œí•œí•˜ê³  overflowë¥¼ scrollë¡œ í•˜ë©´ ëœë‹¤.
- [ ] ë²„íŠ¼
- [x] ë°±, í”„ë¡ íŠ¸ í†µì‹  fetchë¥¼ ì´ìš©í•´ì„œ í´ë¼ì´ì–¸íŠ¸ì™€ ë°±ì•¤ë“œê°„ì˜ ì†Œí†µì´ ê°€ëŠ¥í•˜ë‹¤.
      redrectionì€ ìž‘ë™í•˜ì§€ ì•ŠëŠ”ë‹¤. ë‹¨ì§€ POSTì™€ GETìš”ì²­ì— ë”°ë¼ frontì— ë°ì´í„°ë¥¼ ë³´ë‚¼ ë¿ì´ë‹¤.
      ê·¸ëŸ¬ë©´ í´ë¼ì´ì–¸íŠ¸ì—ì„œ ë°±ì•¤ë“œì—ì„œ ë„˜ì–´ì˜¨ ì •ë³´ë¥¼ ì´ìš©í•´ì„œ ë‚˜ë¨¸ì§€ ê³¼ì •ì„ ì²˜ë¦¬í•´ì£¼ì–´ì•¼í•œë‹¤. ë˜í•œ í´ë¼ì´ì–¸íŠ¸ì—ì„œ
      ì„¸ì…˜ì„ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì„ ìž˜ ëª¨ë¥´ê² ë‹¤. ë³´ë©´ sessionStoreë¥¼ ì´ìš©í•˜ëŠ”ë° sessionStoreëŠ” í•´ë‹¹ íŽ˜ì´ì§€ë¥¼ ë²—ì–´ë‚˜ë©´
      ì´ˆê¸°í™”ë˜ê¸° ë–„ë¬¸ì— ë°ì´í„°ë¥¼ ì €ìž¥í•´ì„œ í•´ë‹¹ ê°’ìœ¼ë¡œ booleanì„ íŒë‹¨í•´ì•¼í•œë‹¤ë©´ ì í•©í•˜ì§€ ì•Šë‹¤. ê·¸ëž˜ì„œ localStoreë¥¼ ì‚¬ìš©í–ˆì§€ë§Œ
      ê·¸ê±´ í¬ë¡¬ì„ ì¡°ê¸ˆë§Œ ìž˜ ì•„ëŠ” ì‚¬ëžŒì´ë¼ë©´ ë³€ì´ê°€ ê°€ëŠ¥í•˜ê¸° ë–„ë¬¸ì— í•´ë‹¹ ê°’ìœ¼ë¡œ ë°±ì•¤ë“œë¥¼ ì¡°ìž‘í•˜ëŠ” ì•Œê³ ë¦¬ì¦˜ì„ ë§Œë“¤ë©´ ì•ˆëœë‹¤.
- [ ] ì´ë²¤íŠ¸ë¦¬ìŠ¤ë„ˆëŠ” ì–´ë””ì— ???
- [ ] íšŒì› ê°€ìž…...ê´€ë ¨ ë²•ë¥ , ê°œì¸ì •ë³´ ì´ìš© ì•½ê´€, ë³´ì•ˆ, ì¿ í‚¤ ì‚¬ìš© í—ˆìš©ì— ëŒ€í•œ ë²„íŠ¼ ë“±...
- [ ] csv ë‹¤ìš´ë¡œë“œ

### 2021ë…„ 7ì›” 29ì¼

ë“œë””ì–´ ë°±ì•¤ë“œ ì½”ë©˜íŠ¸ë¥¼ ë‹¬ê³  ì‚­ì œí•  ìˆ˜ ìžˆë„ë¡ ê¸°ëŠ¥ì„ ë§Œë“¤ì—ˆë‹¤ë§Œ... ìˆ˜ì • ê¸°ëŠ¥ì€ ì•„ì§ ëª» ë§Œë“¤ì—ˆë‹¤...

- [ ] ì½”ë©˜íŠ¸ ìˆ˜ì • ë²„íŠ¼ ë§Œë“¤ê¸°

ì™œ ì´ë ‡ê²Œ í•˜ë©´ í•  ìˆ˜ë¡ í•  ì¼ì´ ìŒ“ì—¬ê°€ëŠ”ì§€ ëª¨ë¥´ê² ë‹¤. ì‚¬ì‹¤ ì¼ë¶€í„° ì‹­ê¹Œì§€ ë§Œë“œëŠ”ê±´ ì–´ë ¤ìš´ì¼ì´ë‹¤. í•˜ë©´ì„œ ë„ì›€ì´ ë˜ëŠ” ë¶€ë¶„ì´ ìžˆì§€ë§Œ...

### 2021ë…„ 8ì›” 7ì¼

helmet ì‚¬ìš©ì„ ì½ì–´ë³´ì•˜ë‹¤. ë³´ì•ˆì„ ìž˜ ëª¨ë¥´ë”ë¼ë„ ìµœì†Œì•ˆì˜ ë³´ì•ˆì„ í•´ì•¼í–ˆê¸° ë•Œë¬¸ì´ë‹¤.
ì¼ë‹¨ ê°„ë‹¨í•˜ê²Œ 3ê°€ì§€ë¥¼ ì ìš©ì‹œì¼°ë‹¤.
helmet default
hidePoweredBy
contentSecurityPolicy
hsts

### 2021ë…„ 9ì›” 1ì¼

#### serverì™€ clientëŠ” ì–´ë–»ê²Œ ì†Œí†µí• ê¹Œ?

íšŒì› ê°€ìž… validation ì½”ë“œë¥¼ ìž‘ì„±í•˜ëŠ”ë°, ì²˜ìŒì— êµ¬ìƒì€ ì´ëž¬ë‹¤.

> êµ¬ìƒ
>
> - session storageë¥¼ ì‚¬ìš©í•´ì„œ input ê°’ì„ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì œì™¸í•˜ê³  ì „ë¶€ ì €ìž¥í•œë‹¤.
> - serverì—ì„œ status codeê°€ 400ì´ return ë ê²½ìš° session storageì— ì €ìž¥í•œ ê°’ì„ ë¶ˆëŸ¬ì™€ inputì— ë¿Œë ¤ì¤€ë‹¤.

ì¼ë‹¨ êµ¬ìƒì„ ì´ë£¨ê¸° ìœ„í•´ì„œ ì½”ë“œë¥¼ ìž‘ì„±í–ˆë‹¤. session storageì— ì €ìž¥í•˜ëŠ” ê²ƒê³¼ inputì— ê·¸ë ¤ì£¼ëŠ” ê²ƒì€ ì‰½ê²Œ êµ¬í˜„í•  ìˆ˜ ìžˆì—ˆë‹¤.

```javascript
const form = document.querySelector(".form_container form");
const inputs = form.querySelectorAll("input");
const button = form.querySelector("button");

function handleSessionStorage(e) {
  inputs.forEach((value) => {
    if (value.name !== "password" && value.name !== "password2") {
      sessionStorage.setItem(value.name, value.value);
    }
  });
}

function paintInputValue() {
  const data = Object.keys(sessionStorage);
  for (let item of data) {
    inputs.forEach((value) => {
      if (value.name === item) {
        value.value = sessionStorage.getItem(item);
      }
    });
  }
}

if (form) {
  button.addEventListener("click", handleSessionStorage);
  paintInputValue();
}
```

ê·¸ëŸ°ë° ë¬¸ì œëŠ” serverì—ì„œ statusë¥¼ 400ìœ¼ë¡œ ë³´ë‚¼ ê²½ìš°ë¥¼ clientì—ì„œ ë°›ì•„ì•¼í•˜ëŠ”ë° ì–´ë–»ê²Œ ë°›ì•„ì•¼í• ì§€ ë‚œê°í–ˆë‹¤.

1. Controllerì—ì„œ returnì„ í•˜ë©´ routerì—ì„œ postë¥¼ í•˜ë„ë¡ ì„¤ê³„ ë˜ì–´ìžˆê¸° ë•Œë¬¸ì— íŽ˜ì´ì§€ê°€ ìƒˆë¡œê³ ì¹¨ëœë‹¤.
2. fetchë¡œ í•  ê²½ìš° postë¥¼ í•˜ì—¬ ê°’ì„ ë„˜ê²¨ì•¼í•˜ëŠ”ë° ê·¸ë ‡ê²Œí•˜ë”ë¼ë„ ì—­ì‹œ controllerì—ì„œ ê°’ì„ ë°›ëŠ”ë‹¤.

ê·¸ëŸ¬ë‹ˆê¹Œ request ìš”ì²­ì´ ë‹¨ì¼ì´ ì•„ë‹ˆë¼ ë‘ ê°ˆëž˜ë¡œ ë‚˜ë‰˜ì–´ìžˆëŠ”ê²Œ ë¬¸ì œì˜€ë‹¤. ì´ê±¸ ì–´ë””ì„œë¶€í„° ì„¤ê³„ë¥¼ í•´ì•¼í• ì§€ ë‚œê°í–ˆë‹¤. ê·¸ëž˜ì„œ ê·¸ëƒ¥ ì¼ë‹¨ ì–´ë–»ê²Œ ë™ìž‘í•˜ëŠ”ì§€ë§Œì´ë¼ë„ íŒŒì•…í•´ë³´ê¸° ìœ„í•´ì„œ ê·¸ëƒ¥ fetchë¡œ postìš”ì²­ì„ ë˜ì¡Œë‹¤.

```javascript
async function handleSessionStorage(e) {
  e.preventDefault();
  const request = await fetch("/join", {
    method: "POST",
  });

  if (request.status === 400) {
    inputs.forEach((value) => {
      if (value.name !== "password" && value.name !== "password2") {
        sessionStorage.setItem(value.name, value.value);
      }
    });
    paintInputValue(request);
  }
  if (request.status === 200) {
    console.log("hi");
  }
}

function paintInputValue(request) {
  if (request.status === 400) {
    const data = Object.keys(sessionStorage);
    for (let item of data) {
      inputs.forEach((value) => {
        if (value.name === item) {
          value.value = sessionStorage.getItem(item);
        }
      });
    }
  }
}
```

ì¼ë‹¨ ë„ˆë¬´ ë‹¹ì—°í•˜ê²Œë„(?) ë™ìž‘ì„ í•˜ê¸´ í•˜ì§€ë§Œ ì˜ë„ëŒ€ë¡œ ë˜ì§€ ì•Šì•˜ë‹¤. ì¼ë‹¨ ìƒˆë¡œê³ ì¹¨ì´ ê³„ì† ëœë‹¤. ê·¸ëž˜ì„œ ë²„íŠ¼ì„ ëˆ„ë¥¼ ë•Œ, ìƒˆë¡œê³ ì¹¨ì´ ì•ˆë˜ë„ë¡ ë§‰ì•„ë²„ë ¸ë‹¤.

```javascript
async function handleSessionStorage(e) {
  e.preventDefault();
  const request = await fetch("/join", {
    method: "POST"
  });
........
```

ê·¸ëŸ¼ requestì˜ status ì½”ë“œë¥¼ ë°›ì„ ìˆ˜ ìžˆì—ˆë‹¤.
í•˜ì§€ë§Œ ìƒˆë¡œìš´ ë¬¸ì œë¥¼ ë§žë”±ëœ¨ë ¸ë‹¤.

1. ë³¸ëž˜ ì„¤ê³„í–ˆë˜ controllerê°€ ì •ìƒì ìœ¼ë¡œ ìž‘ë™ì„ í•˜ì§€ ì•Šì„ ë¿ë”ëŸ¬, ì›ëž˜ ì„±ê³µí•˜ëŠ” ê°’ì„ ë„˜ê²¨ë„ statusëŠ” ì—¬ì „ížˆ 400ì´ ë„˜ì–´ì™”ë‹¤.
2. ì´ë ‡ê²Œ í•˜ë©´ êµ³ì´ session storageì— ê°’ì„ ì €ìž¥í•  í•„ìš”ê°€ ì—†ë‹¤. ìƒˆë¡œê³ ì¹¨ì´ ë˜ì§€ ì•Šìœ¼ë‹ˆê¹Œ ìž‘ì„±í•œ ê°’ì´ ì‚¬ë¼ì§€ì§€ë„ ì•ŠëŠ”ë‹¤.
3. ë¬¸ì œëŠ” validationì´ ë˜ì§€ ì•ŠëŠ”ë‹¤. clientì—ì„œ ì˜¤ë¥˜ ë©”ì‹œì§€ë¥¼ ë„ì›Œì¤˜ì•¼í•˜ëŠ”ë° controllerì—ì„œ ì„¤ê³„í–ˆë˜ ëŒ€ë¡œ ê°’ì´ ë„˜ì–´ì˜¤ì§€ ì•Šì•˜ë‹¤.

ê·¸ëž˜ì„œ stackoverflowë¥¼ ì—´ì‹¬ížˆ ë’¤ì ê±°ë ¸ë‹¤.

> ì§ˆë¬¸ : how to get http request from server to client javascript

ì•„ì§ ìœ ì˜ë¯¸í•œ ëŒ€ë‹µì€ ì°¾ì§€ ëª»í–ˆë‹¤. ê·¸ëž˜ì„œ ì¼ë‹¨ ë‹¤ì‹œ ê°€ì„¤ì„ ì„¸ì›Œë³´ê¸°ë¡œí–ˆë‹¤.

> ìž¬êµ¬ìƒ

- ê·¸ëŸ¬ë©´ commentë¥¼ ì„¤ê³„ í•  ë•Œ, fetchë¥¼ ì‚¬ìš©í•´ì„œ clientì™€ serverê°„ì— ì†Œí†µì„ í–ˆë˜ ê²ƒì²˜ëŸ¼ JSONìœ¼ë¡œ ê°’ì„ ì£¼ê³  ë°›ë„ë¡ ì„¤ê³„ë¥¼ ë³€ê²½í•œë‹¤.
- ê·¸ë ‡ê²Œ í•˜ë©´ status codeë¥¼ clientì— ë³´ë‚¼ ìˆ˜ ìžˆë‹¤. ê·¸ëŸ¬ë©´ ë‘ ê°€ì§€ë¥¼ ë‹¤ ìž¡ì„ ìˆ˜ ìžˆì„ ìˆ˜ë„ ìžˆë‹¤.
- ë¨¼ì € ì²« ë²ˆ ì§¸ë¡œ DBë¥¼ ì¡°íšŒí•´ì„œ ì´ë¯¸ DBì— ìžˆëŠ” uniqueí•œ ê°’ì„ ìž…ë ¥í–ˆëŠ”ì§€ ì—¬ë¶€ë¥¼ clientë¡œ ë³´ë‚¼ ìˆ˜ ìžˆë‹¤. ê·¸ë¦¬ê³  validation ì½”ë“œë¥¼ client ìª½ì—ì„œ ìž‘ì„±í•˜ì—¬ì„œ controllerë¡œ ê°’ì´ ë„˜ì–´ê°€ê¸°ì „ì— ê·¸ ê°’ì´ ì˜¬ë°”ë¥¸ ê°’ì¸ì§€ ì•„ë‹Œì§€ ê²€ì¦í•  ìˆ˜ ìžˆë‹¤.
- ê·¸ë ‡ê²Œ í•˜ë©´ êµ³ì´ session storageë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šì•„ë„ ì‚¬ìš©ìžê°€ ìž…ë ¥í•œ ê°’ì´ ì‚¬ë¼ì§€ì§€ëŠ” ì•Šì„ ê²ƒì´ë‹¤.

> ê¼­ ì„±ê³µí•˜ê¸°ë¥¼ ðŸ˜¢

### 2021ë…„ 9ì›” 2ì¼

#### frontì—ì„œ ì–‘ì‹ ê²€ì¦í•˜ê¸°

ë‹¤ì‹œ ì»´í“¨í„°ì— ì•‰ì•˜ë‹¤. ì €ë²ˆ êµ¬ìƒëŒ€ë¡œ ëª¨ë“  ê²ƒì„ ì‹¹ ë°”ê¾¸ê¸°ë¡œ í–ˆë‹¤. ì¼ë‹¨ í”„ë¡ íŠ¸ì—ì„œ íšŒì›ê°€ìž… ì–‘ì‹ì„ ë°›ì•„ì„œ ê°’ì„ ë¨¼ì € ê²€ì¦í•˜ê¸°ë¡œ í–ˆë‹¤. ê·¸ëž˜ì„œ ê¸°ì¡´ì— íšŒì› ê°€ìž… ì–‘ì‹ì„ í™•ì¸í•˜ëŠ” ì ˆì°¨ë¥¼ ë§Œë“¤ì—ˆë‹¤.

```javascript
async function submitJoinForm(e) {
  e.preventDefault();
  const data = makeDictionary(); // ê°ì²´ë¥¼ ë§Œë“œëŠ” í•¨ìˆ˜
  const checker = checkJoinData(data); // ê°ì²´ë¥¼ ì‚¬ìš©í•´ ë°ì´í„°ë¥¼ í™•ì¸í•˜ëŠ” í•¨ìˆ˜ ìµœì¢…ì ìœ¼ë¡œ trueì™€ falseë¥¼ ë„˜ê²¨ì¤€ë‹¤.
  if (checker) {
    postDataToServer(data); // checkerì—ì„œ trueê°€ ë„˜ì–´ì˜¤ë©´ fetchë¡œ ë°ì´í„°ë¥¼ ì„œë²„ë¡œ ë³´ë‚¸ë‹¤.
  }
}
```

ì €ë²ˆì— êµ¬ìƒí–ˆë˜ ê²ƒì„ ì „ë¶€ ë’¤ì§‘ì–´ ì—Žì—ˆì§€ë§Œ ì§€ê¸ˆì´ ì½”ë“œ ê°€ë…ì„±ì´ë‚˜ ìž‘ë™ ì¸¡ë©´ì´ë‚˜ ëª¨ë“  ë©´ì—ì„œ í›¨ì”¬ ì¢‹ì€ ê²ƒ ê°™ë‹¤. ê´œížˆ sessionStorageë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šì•„ë„ ëœë‹¤.

ì¼ë‹¨ documentì—ì„œ inputê°’ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ê²ƒì„ ë‚´ê°€ ë°˜ë³µí•˜ê¸°ê°€ ë„ˆë¬´ ì‹«ì—ˆë‹¤.(ë‚˜ëŠ” ê²Œìœ¼ë¥´ë‹ˆê¹Œ...) ê·¸ëž˜ì„œ querySelectAllì„ ì‚¬ìš©í•´ì„œ inputì„ ì „ë¶€ ë¶ˆëŸ¬ì˜¤ê¸°ë¡œ í–ˆë‹¤. ê·¸ëŸ¼ ìœ ì‚¬ ë°°ì—´ë¡œ inputì„ ì „ë¶€ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ìžˆë‹¤.

```javascript
function makeDictionary() {
  const inputDict = {}; // ê°ì²´ ìƒê°í•´ë³´ë‹ˆ ì´ë ‡ê²Œ ì•ˆí•´ë„ ë ê²ƒê°™ë‹¤.
  inputs.forEach((value) => {
    if (!inputDict[value.name]) {
      inputDict[value.name] = value.value.trim();
    }
  });
  return inputDict; // ê·¸ëƒ¥ ì´ ê°’ì„ {}ì´ë ‡ê²Œ ë„˜ê²¨ì¤˜ë„ ë  ê²ƒ ê°™ë‹¤.
}
```

ë§Œë“  ê°ì²´ë¥¼ checkJoinDataì— ë„˜ê²¨ì£¼ê³ ë‚˜ë©´ ê°ì²´ ê°’ì„ ê²€ì¦í•˜ëŠ” í•¨ìˆ˜ë¥¼ ì§°ë‹¤. ìµœëŒ€í•œ ë°˜ë³µì„ í”¼í•˜ê³  ì‹¶ì—ˆë‹¤. ê·¸ëŸ°ë° ì™œ í•¨ìˆ˜ê°€ ê²°êµ­ ê±°ê¸°ì„œ ê±°ê¸°ì¸ ê²ƒ ê°™ì„ê¹Œ. ì–´ì¨Œë“  ê°ì²´ì— ì €ìž¥ëœ í‚¤ ê°’ì„ ê°ê° email, name, username, passwordë¥¼ ê²€ì¦í•˜ëŠ” í•¨ìˆ˜ë¡œ ë³´ë‚¸ ë‹¤ìŒì— ì›í•˜ëŠ” ê°’ìœ¼ë¡œ ìž…ë ¥ë˜ë„ë¡ ì²´í¬í•˜ê²Œë” í–ˆë‹¤. ì•„ì§ì€ ê°€ìž…ìžê°€ ë­˜ ìž˜ëª»í–ˆëŠ”ì§€ ë©”ì‹œì§€ë¥¼ ë„ì›Œì£¼ì§€ëŠ” ì•ŠëŠ”ë‹¤.

checker í•¨ìˆ˜ëŠ” ë„˜ê²¨ë°›ì€ ë¬¸ìžë¥¼ ì •ê·œ í‘œí˜„ì‹ìœ¼ë¡œ ê²€ì¦í•œë‹¤. ì •ê·œ í‘œí˜„ì‹ì€ êµ¬ê¸€ì— ë§Žì´ ë‚˜ì™€ìžˆê³ , íŠ¹ìˆ˜ë¬¸ìžë¥¼ ì œê±°í•˜ëŠ” ë°©ë²•ì´ë‚˜ í•œê¸€ë§Œ ìž…ë ¥í•  ìˆ˜ ìžˆë„ë¡ í•˜ê²Œ í•˜ëŠ” ë“±ì˜ ì¡°í•©ë²•ì´ ì¹œì ˆí•˜ê²Œ ì„¤ëª…ë˜ì–´ìžˆë‹¤.

[ì°¸ê³ í•œ ë™ì˜ìƒ : JavaScript Client-side Form Validation](https://youtu.be/rsd4FNGTRBw)

```javascript
function checkJoinData(obj) {
  for (let item in obj) {
    switch (item) {
      case obj[item] === "":
        errorMessage(item);

      case "email":
        if (!isEmail(obj["email"])) {
          errorMessage("email");
          return false;
        } else {
          successMessage("email");
        }
      case "userName":
        if (!isUserName(obj["userName"])) {
          errorMessage("userName");
          return false;
        } else {
          successMessage("userName");
        }
      case "name":
        if (!isName(obj["name"])) {
          errorMessage("name");
          return false;
        } else {
          successMessage("name");
        }
      case "password":
        if (
          isPassword(obj["password"]) &&
          obj["password"] === obj["password2"]
        ) {
          successMessage("password");
          successMessage("password2");
        } else {
          errorMessage("password");
          errorMessage("password2");
          return false;
        }
    }
  }
  return true;
}

function errorMessage(str) {
  inputs.forEach((value) => {
    if (value.name === str) {
      value.classList.add("errorWarning");
      value.classList.remove("sucessMessage");
    }
  });
}

function successMessage(str) {
  inputs.forEach((value) => {
    if (value.name === str) {
      value.classList.add("sucessMessage");
      value.classList.remove("errorWarning");
    }
  });
}

function isEmail(email) {
  return /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.exec(
    email,
  );
}

function isName(name) {
  return /[ã„±-ã…Ž|ã…-ã…£|ê°€-íž£]{2,6}$/.exec(name);
}

function isUserName(userName) {
  const checkerUserName = /^[a-zA-Z0-9]{5,10}$/.exec(userName);
  if (checkerUserName) {
    return checkerUserName;
  }
}

function isPassword(password) {
  const checkPassword =
    /^(?=.*[A-Za-z])(?=.*\d)(?=.*[$@$!%*#?&])[A-Za-z\d$@$!%*#?&]{8,}$/.exec(
      password,
    );
  if (checkPassword) {
    return checkPassword;
  }
}
```

ì´ë ‡ê²Œ í•˜ê³ ë‚˜ë©´ ì¼ë‹¨ í”„ë¡ íŠ¸ì—ì„œ ê²€ì¦ì„ ë§ˆì¹  ìˆ˜ ìžˆë‹¤. ê²€ì¦ì„ í•  ë•Œ, í•˜ë‚˜ì˜ ê°’ì´ë¼ë„ falseê°€ ë‚˜ì˜¤ë©´ falseê°’ì„ return í•˜ë„ë¡ ë§Œë“¤ì—ˆë‹¤. ê·¸ëž˜ì„œ validationì´ ì²˜ìŒì— ì„¤ê³„í•œ ê²ƒê³¼ ë‹¤ë¥´ë‹¤. ê°’ì„ ì°¨ë¡€ëŒ€ë¡œ return í•˜ê¸° ë•Œë¬¸ì— í•¨ìˆ˜ê°€ ì‹¤í–‰ ë˜ë‹¤ ì¤‘ë‹¨ëœë‹¤. ì•„ë§ˆë„ ì§€ê¸ˆì€ ê°œì„ ë˜ì§€ ì•Šì•˜ì§€ë§Œ ë°°ì—´ì— booleanê°’ì„ pushí•˜ì—¬ì„œ ëª¨ë‘ê°€ ì°¸ì´ë©´ trueë¥¼ ë¦¬í„´í•˜ê²Œ í•˜ê³  í•˜ë‚˜ë¼ë„ ê±°ì§“ì´ë©´ falseë¥¼ ë°˜í™˜í•˜ê²Œë” í•˜ë©´ ê°’ì€ ê°’ëŒ€ë¡œ ì „ë‹¬ë˜ê³  ì–‘ì‹ ìž…ë ¥ì´ ì˜¬ë°”ë¥´ì§€ ì•Šì€ ê³³ì„ í•œë²ˆì— ì²´í¬ í•  ìˆ˜ ìžˆì„ ê²ƒì´ë‹¤.

#### ì™œ req.fileì´ undefinedì¼ê¹Œ?

ë¬¸ì œëŠ” íšŒì› ê°€ìž… ì–‘ì‹ì— fileì„ ë°›ì•„ì•¼í•˜ëŠ”ë° controllerê°€ fileì„ ê³„ì† ì¸ì§€í•˜ì§€ ëª»í–ˆë‹¤. ì´ê²ƒìœ¼ë¡œ ê±°ì˜ 3ì‹œê°„ì„ ë‚ ë ¸ë‹¤.

êµ¬ê¸€ì— ì—´ì‹¬ížˆ ê²€ìƒ‰ì„ í–ˆë‹¤.

> - multer with fetch

- req.file undefined multer, fetch, javascript

í•˜ì§€ë§Œ ë‹µì„ ì‰½ê²Œ ì•Œìˆ˜ ì—†ì—ˆë‹¤. statusëŠ” 400ì´ë‚˜ 500ì„ ë°›ì•˜ë‹¤.

```javascript
async function postDataToServer(data) {
  const response = await fetch("/join", {
    method: "POST",
    headers: {
      "Content-Type": "multipart/form-data",
    },
    body: JSON.stringify(data),
  });

  console.log(response);

  if (response.ok) {
    window.location.pathname = "/login";
  } else {
    console.log("wtf");
  }
}
```

responseê°’ì´ okê°€ ì•„ë‹ˆë©´ ë°›ê²Œë˜ëŠ” 'wtf'ì„ ëª‡ ì‹œê°„ë™ì•ˆ ë°›ë‹¤ë³´ë‹ˆê¹Œ ë‚˜í•œí…Œ ìš•í•˜ëŠ” ê²ƒ ê°™ì•„ì„œ ê¸°ë¶„ì´ ì ì  ì¢‹ì•„ì§€ì§€ ì•Šì•˜ë‹¤. ì²˜ìŒì—” ì´ê²ƒë§Œ í•´ê²°í•˜ê³  ë°¥ë¨¹ì–´ì•¼ì§€ í–ˆëŠ”ë°... í•˜ë‹¤ë³´ë‹ˆ ì €ë…ì‹œê°„ë„ ë†“ì¹˜ê³  ì •ë§ ì§œì¦ì´ ì´ë§Œ ì €ë§Œì´ ì•„ë‹ˆì—ˆë‹¤.

ì²˜ìŒì— multerë¥¼ êµ¬ì„±í•˜ê³  ìžˆëŠ” middlewareê°€ ìž˜ëª»ëë‹¤ê³  ìƒê°í–ˆë‹¤. ì™œëƒí•˜ë©´ fileì„ postí•˜ë ¤ê³  ìš”ì²­ì„ ë³´ëƒˆëŠ”ë° statusê°’ì´ 500ì„ ë°›ì•˜ê¸° ë•Œë¬¸ì´ë‹¤.

[500 Internal Server Error](https://developer.mozilla.org/ko/docs/Web/HTTP/Status/500)

ê·¸ëŸ°ë° ì¡°ê¸ˆë§Œ ìƒê°í•´ë³´ë©´ ê·¼ê±°ê°€ ì—†ëŠ” ê²°ë¡ ì´ì—ˆë‹¤. ë³´ë‚´ëŠ” ê°’ì´ ìž˜ëª»ëœê±´ì§€ ì„œë²„ê°€ ê°’ì„ ì²˜ë¦¬ë¥¼ ëª»í•˜ëŠ”ê±´ì§€ ì•Œ ìˆ˜ê°€ ì—†ìž–ì•„? ì•„ë§ˆë„ ì²˜ìŒì— fetchë¥¼ í•  ë•Œ, fileì„ ë°›ê¸° ìœ„í•´ ë³´ë‚¸ headerê°’ì´ ìž˜ëª» ëœê±°ë¼ê³  ìƒê°í•œë‹¤.

```javascript
headers:{
      "Content-Type":"multipart/form-data" //
    }
```

ì–´ì¨Œë“  ì´ ê°’ì„ "application/json"ìœ¼ë¡œ ë°”ê¿”ì£¼ë‹ˆê¹Œ fileì€ ì—¬ì „ížˆ undefinedì´ì§€ë§Œ ë‚˜ë¨¸ì§€ bodyê°’ì€ jsonìœ¼ë¡œ ë„˜ê²¨ ë°›ì„ ìˆ˜ ìžˆì—ˆê¸° ë•Œë¬¸ì´ë‹¤.

#### í•´ê²°

ê²°ë¡ ì ìœ¼ë¡œ

- multerë¥¼ êµ¬ì„±í•˜ê³  ìžˆëŠ” middlewareëŠ” ì•„ë¬´ ìž˜ëª»ì´ ì—†ì—ˆë‹¤.
- ì• ì´ˆë¶€í„° ê°’ì„ ìž˜ëª» ë„˜ê²¨ì£¼ê³  ìžˆì—ˆë‹¤.

> í•´ê²°í•˜ëŠ”ë° ë„ì›€ì´ ëœ stackoverflow ê²Œì‹œë¬¼
> [req.file is undefined using multer](https://stackoverflow.com/questions/55926272/req-file-is-undefined-using-multer)

ë‚´ê°€ ë§Œë“  ê°ì²´ ê°’ì„ jsonìœ¼ë¡œ ì„œë²„ë¡œ ë³´ë‚´ëŠ” ë°©ë²•ì´ ìž˜ëª»ë˜ì—ˆë‹¤.

```javascript
async function postDataToServer(data) {
  const file = new FormData(form); // ì•„ì–˜ formë°ì´í„°ë¥¼ ë°›ì•„ì„œ fetch dataë¡œ ë„˜ê²¨ì£¼ì—ˆë”ë‹ˆ í•´ê²°ë˜ì—ˆë‹¤.

  const response = await fetch("/join", {
    method: "POST",
    body: file,
  });

  console.log(response);

  if (response.ok) {
    window.location.pathname = "/login";
  } else {
    console.log("wtf");
  }
}
```

ì´ ìš”ì²­ì— ì ë‹¹í•œ Http headerê°’ì„ ì§€ê¸ˆì€ ëª¨ë¥´ê² ë‹¤. ê·¸ëŸ°ë° headerë¥¼ ì œê±°í•˜ê³  bodyì— FormDataë¡œ ìƒì„±í•œ formê°’ì„ í•œë²ˆì— ë„˜ê²¨ì£¼ì—ˆë”ë‹ˆ ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ bodyê°’ë¿ ì•„ë‹ˆë¼ fileê¹Œì§€ ì „ë¶€ ì¸ì‹í–ˆë‹¤.

- ì§€ê¸ˆê¹Œì§€ì˜ ê³¼ì •ìœ¼ë¡œ ì¶”ì¸¡í•´ë³¼ ìˆ˜ ìžˆëŠ” ê²ƒì€ postë¥¼ ìš”ì²­í•  ë•Œ, routerê°€ postJoinì„ í•˜ê¸° ì „ì— multerë¥¼ ê±°ì¹˜ë„ë¡ ë˜ì–´ìžˆëŠ”ë° ì´ë•Œ ë°ì´í„°ë¥¼ jsonì´ ì•„ë‹ˆë¼ form ë°ì´í„°ë¥¼ í•œë²ˆì— ë„˜ê²¨ì£¼ë©´ multerê°€ dataë¥¼ ë³´ê³  ì›ëž˜ëŒ€ë¡œ íŒŒì¼ê³¼ bodyê°’ì„ ì „ë¶€ ë„˜ê²¨ì£¼ëŠ” ë“¯ í•˜ë‹¤.

- ê·¸ëŸ¼ frontì˜ validationì´ í—›ìˆ˜ê³ ê°€ ì•„ë‹Œê°€ ìƒê°í•  ìˆ˜ ìžˆì§€ë§Œ ê·¸ë ‡ì§€ë„ ì•Šë‹¤. fetchë¡œ ë„˜ì–´ê°€ê¸°ì „ì— ê°’ì„ ê²€ì¦í•œ ë‹¤ìŒì— ë„˜ê²¨ì£¼ëŠ” ê±°ë‹ˆê¹Œ ì˜ë¯¸ê°€ ì—†ì§€ ì•Šë‹¤.

#### AWS S3ì—ì„œ ìž‘ë™ì„ ì•ˆí•˜ëŠ” ê±¸ê¹Œ??

ë¡œì»¬ ì„œë²„ì—ì„œ ì„±ê³µì€ í–ˆë‹¤. ë¬¸ì œëŠ” heroku ì—…ë°ì´íŠ¸ í›„ì— íšŒì›ê°€ìž…ì´ ì •ìƒì ìœ¼ë¡œ ìž‘ë™ì„ í•˜ì§€ ì•ŠëŠ”ë‹¤. ì´ìœ ê°€ ë­˜ê¹Œ? ìž˜ ëª¨ë¥´ê² ë‹¤. ì¼ë‹¨ status codeëŠ” 500ì„ ë°›ëŠ”ë‹¤. serverì—ì„œ ë­”ê°€ ë¬¸ì œê°€ ìƒê¸´ê²ƒì´ ë¶„ëª…í•œë° AWS S3ë¡œ íŒŒì¼ì„ ë„˜ê²¨ì£¼ë©´ì„œ ì•„ë§ˆë„ ë­”ê°€ ë¬¸ì œê°€ ìžˆëŠ”ê²Œ ì•„ë‹ê¹Œ? ê·¸ëƒ¥ ì¶”ì¸¡ì„ í•´ë³¼ ë¿ì´ë‹¤.

ê·¸ëŸ¼ ì •ìƒì ìœ¼ë¡œ ìž‘ë™ì„ ì‹œí‚¤ê¸° ìœ„í•´ì„œ ì¡°ê¸ˆ ë” ì½”ë“œë¥¼ ì •ë°€í•˜ê²Œ ë§Œë“¤ì–´ì•¼í•œë‹¤.

> **íšŒì› ê°€ìž…ì´ ë˜ì§€ ì•ŠëŠ” ì´ìœ ë¥¼ ì°¾ê¸° ìœ„í•´ì„œ í•´ì•¼ í•  ê²ƒë“¤**

- controllerì—ì„œ unique ê²€ì¦ì´ ì‹¤íŒ¨í–ˆì„ ë•Œ, status codeë¥¼ frontë¡œ ë³´ë‚´ì£¼ëŠ”ë° ì´ë ‡ê²Œ í–ˆì„ ê²½ìš°ì— frontì—ì„œ errorë©”ì‹œì§€ë¥¼ ì–´ëŠ ë¶€ë¶„ì—ì„œ ì‹¤íŒ¨í•œ ê²ƒì¸ì§€ ë³´ì—¬ì£¼ì–´ì•¼í•œë‹¤. ì§€ê¸ˆ ì½”ë“œëŠ” UX ë””ìžì´ë„ˆê°€ ë´¤ì„ ë•Œ, WTFì´ë‹¤.
- frontì—ì„œ ê²€ì¦ì´ ì‹¤íŒ¨í–ˆë‹¤ë©´ ê·¸ëƒ¥ ë¹¨ê°„ìƒ‰ ì¤„ë§Œ ê¸‹ì§€ ë§ê³  ì™œ ì‹¤íŒ¨í–ˆëŠ”ì§€ ë©”ì‹œì§€ë¥¼ ì¶œë ¥í•´ì•¼í•œë‹¤.
- S3ë¡œ íŒŒì¼ ì—…ë°ì´íŠ¸ë¥¼ ì‹¤íŒ¨í•˜ê¸° ë•Œë¬¸ì— íšŒì› ê°€ìž…ì´ ë˜ì§€ ì•ŠëŠ” ê²ƒì¸ì§€ ì•„ë‹Œì§€ë¥¼ ì•Œê¸° ìœ„í•´ì„œëŠ” ì¼ë‹¨ íŒŒì¼ì„ ì—…ë¡œë“œ í•˜ì§€ ì•Šê³  íšŒì› ê°€ìž…ì„ ì§„í–‰ í•´ë³¸ë‹¤. ë‹¤ë¥¸ ì¡°ê±´ì´ ì„±ê³µ ì¡°ê±´ì¸ë° ì—¬ì „ížˆ íšŒì› ê°€ìž…ì— ì‹¤íŒ¨í•œë‹¤ë©´ S3ë¥¼ ì˜ì‹¬í•´ë³´ê¸°ë„ ì „ì— fetchì—ì„œ ë¬¸ì œê°€ ìžˆë‹¤ê³  íŒë‹¨í•´ë³¼ ìˆ˜ ë°–ì— ì—†ë‹¤.

ê³„ì† í…ŒìŠ¤íŠ¸ë¥¼ ë°˜ë³µí•˜ë‹¤ë³´ë‹ˆê¹Œ ë§Œë§Œì¹˜ê°€ ì•Šë‹¤. ì•„ë§ˆ ë””ë²„ê¹… ë°©ë²•ì´ ê·¸ë‹¥ ì¢‹ì§€ ì•Šê¸° ë•Œë¬¸ì´ ì•„ë‹ê¹Œ? console.logë¡œ ê°’ì„ ì°ì–´ì„œ ë³´ëŠ” ê²ƒì´ í•œê³„ê°€ ìžˆë‹¤. ê·¸ëŸ°ë° **_nodejsëŠ” ë””ë²„ê¹… ì–´ë–»ê²Œ í•˜ëŠ”ê±°ëƒ?_** ðŸ¥²

### 2021ë…„ 9ì›” 7ì¼

#### image resize

[12/ File Apiì™€ ì´ë¯¸ì§€ ìš©ëŸ‰ ì¤„ì´ê¸°](https://feel5ny.github.io/2018/05/27/JS_12/)

[AWS Lambdaë¥¼ ì´ìš©í•œ ì´ë¯¸ì§€ ì¸ë„¤ì¼ ìƒì„± ê°œë°œ í›„ê¸°](https://medium.com/daangn/aws-lambda%EB%A5%BC-%EC%9D%B4%EC%9A%A9%ED%95%9C-%EC%9D%B4%EB%AF%B8%EC%A7%80-%EC%8D%B8%EB%84%A4%EC%9D%BC-%EC%83%9D%EC%84%B1-%EA%B0%9C%EB%B0%9C-%ED%9B%84%EA%B8%B0-acc278d49980)

[ì˜¨ë””ë§¨ë“œ ì´ë¯¸ì§€ ë¦¬ì‚¬ì´ì§• (Ondemand Image Resizing) ì›ë¦¬ ë° ì˜ˆì œ](https://roka88.dev/102)

[ê¹€ì •í™˜ ë¸”ë¡œê·¸ ì´ë¯¸ì§€ ì—…ë¡œë“œ - 1. multer ëª¨ë“ˆë¡œ íŒŒì¼ ì—…ë¡œë“œ](https://jeonghwan-kim.github.io/%EC%9D%B4%EB%AF%B8%EC%A7%80-%EC%97%85%EB%A1%9C%EB%93%9C-1-multer-%EB%AA%A8%EB%93%88%EB%A1%9C-%ED%8C%8C%EC%9D%BC-%EC%97%85%EB%A1%9C%EB%93%9C/)

[sharpë¥¼ í™œìš©í•œ image resizing + buffer ì´í•´í•˜ê¸°](https://darrengwon.tistory.com/565)

### 2021ë…„ 10ì›” 9ì¼

##### ì›¹ ì»´í¬ë„ŒíŠ¸

[ë„¤ì´ë²„ ì›¹ ì»´í¬ë„ŒíŠ¸](https://d2.naver.com/helloworld/188655)

## 1.3. ì°¸ì¡°

> [Mark Down ë¬¸ë²•](https://gist.github.com/ihoneymon/652be052a0727ad59601)  
> [MarkDown All In One](https://github.com/yzhang-gh/vscode-markdown)
